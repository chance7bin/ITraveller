{"version":3,"sources":["webpack:///E:/fustar2.0/components/aco.vue?4882","webpack:///E:/fustar2.0/components/aco.vue?8d0a","webpack:///E:/fustar2.0/components/aco.vue?6a20","webpack:///E:/fustar2.0/components/aco.vue?3889","webpack:///E:/fustar2.0/components/aco.vue"],"names":["name","data","selectedSight","sightData","distanceMatrix","tempDistance","tempData","tempSight","sightObj","currentLocation","onLoad","getCurrentLocation","methods","getDistance","origin","destination","callback","tempi","no","tempj","uni","request","url","key","lng","lat","strategy","success","res","distance","route","paths","getDistanceMatrix","that","console","log","arrayLength","length","i","j","value","getSightLocation","queryPlace","region","query","ak","output","result","results","location","address","buildSightData","myLocation","push","calculateRoute","setTimeout","text"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4H;AAC5H;AACuD;AACL;;;AAGlD;AAC0M;AAC1M,gBAAgB,6MAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8FAAU;AACZ;AACA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACzCf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAsxB,CAAgB,6wBAAG,EAAC,C;;;;;;;;;;;;mICA1yB;AACA;AACA;AACA;AACA;AACA;;AAEiB;AACbA,MAAI,EAAE,OADO;AAEbC,MAFa,kBAEN;AACL,WAAO;AACLC,mBAAa,EAAC,CAAC,MAAD,EAAQ,OAAR,EAAgB,MAAhB,EAAuB,IAAvB,EAA4B,KAA5B,CADT;AAELC,eAAS,EAAC,EAFL;AAGLC,oBAAc,EAAC,EAHV;AAILC,kBAAY,EAAC,CAJR;AAKLC,cAAQ,EAAC,EALJ;AAMLC,eAAS,EAAC,EANL;AAOLC,cAAQ,EAAC,EAPJ;AAQLC,qBAAe,EAAC,EARX,EAAP;;AAUD,GAbY;;AAehBC,QAfgB,oBAeP;AACP,SAAKC,kBAAL;AACD,GAjBe;;AAmBbC,SAAO,EAAE;;AAEP;AACAC,eAHO,uBAGKC,MAHL,EAGYC,WAHZ,EAGwBC,QAHxB,EAGiC;AAC1C,UAAIC,KAAK,GAAGH,MAAM,CAACI,EAAnB;AACA;AACA,UAAIC,KAAK,GAAGJ,WAAW,CAACG,EAAxB;AACA;AACA;AACFE,SAAG,CAACC,OAAJ,CAAY;AACRC,WAAG,EAAE,+CADG;AAERrB,YAAI,EAAE;AACHsB,aAAG,EAAE,kCADF;AAERT,gBAAM,EAACA,MAAM,CAACU,GAAP,GAAa,GAAb,GAAmBV,MAAM,CAACW,GAFzB;AAGRV,qBAAW,EAACA,WAAW,CAACS,GAAZ,GAAkB,GAAlB,GAAwBT,WAAW,CAACU,GAHxC;AAIRC,kBAAQ,EAAC,CAJD,EAFE;;AAQRC,eAAO,EAAE,iBAACC,GAAD,EAAS;AACd;AACN,cAAIC,QAAQ,GAAGD,GAAG,CAAC3B,IAAJ,CAAS6B,KAAT,CAAeC,KAAf,CAAqB,CAArB,EAAwBF,QAAvC;AACA,eAAI,CAACxB,YAAL,GAAoBwB,QAApB;AACAb,kBAAQ,CAAC,KAAI,CAACX,YAAN,EAAmBY,KAAnB,EAAyBE,KAAzB,CAAR;AACG,SAbO,EAAZ;;;AAgBK,KAzBM;;AA2BP;AACAa,qBA5BO,+BA4BY;AACvB,UAAIC,IAAI,GAAG,IAAX;AACM,WAAK7B,cAAL,GAAsB,EAAtB;AACA8B,aAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,UAAIC,WAAW,GAAG,KAAKjC,SAAL,CAAekC,MAAjC;AACA;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,WAApB,EAAiCE,CAAC,EAAlC,EAAsC;AACpC,aAAKlC,cAAL,CAAoBkC,CAApB,IAAyB,EAAzB;AACD;AACD,WAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,WAApB,EAAiCE,CAAC,EAAlC,EAAsC;AACpC,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAApB,EAAiCG,CAAC,EAAlC,EAAsC;AACpC,eAAK1B,WAAL,CAAiB,KAAKV,SAAL,CAAemC,CAAf,CAAjB,EAAmC,KAAKnC,SAAL,CAAeoC,CAAf,CAAnC,EAAqD,UAASC,KAAT,EAAevB,KAAf,EAAqBE,KAArB,EAA2B;AACxFc,gBAAI,CAAC7B,cAAL,CAAoBa,KAApB,EAA2BE,KAA3B,IAAoCqB,KAApC;AACA;AACA,WAHQ;AAID;AACF;AACD;AACN;AACK,KA/CM;;AAiDP;AACAC,oBAlDO,4BAkDUC,UAlDV,EAkDqBC,MAlDrB,EAkD4BL,CAlD5B,EAkD8BtB,QAlD9B,EAkDuC;AAC5CkB,aAAO,CAACC,GAAR,CAAY,kBAAZ;AACNf,SAAG,CAACC,OAAJ,CAAY;AACRC,WAAG,EAAE,0CADG,EACyC;AACjDrB,YAAI,EAAE;AACR2C,eAAK,EAACF,UADE;AAERC,gBAAM,EAACA,MAFC;AAGRE,YAAE,EAAC,kCAHK;AAIRC,gBAAM,EAAC,MAJC,EAFE;;AAQRnB,eAAO,EAAE,iBAACC,GAAD,EAAS;AACd;AACN,cAAMmB,MAAM,GAAGnB,GAAG,CAAC3B,IAAJ,CAAS+C,OAAT,CAAiB,CAAjB,CAAf;AACA;AACA,gBAAI,CAACxC,QAAL,GAAgB;AACd,kBAAM8B,CAAC,GAAC,CADM;AAEd,oBAAQS,MAAM,CAAC/C,IAFD;AAGd,mBAAO+C,MAAM,CAACE,QAAP,CAAgBxB,GAHT;AAId,mBAAOsB,MAAM,CAACE,QAAP,CAAgBzB,GAJT;AAKd,uBAAWuB,MAAM,CAACG,OALJ,EAAhB;;AAOAlC,kBAAQ,CAAC,MAAI,CAACR,QAAN,CAAR;AACG,SApBO,EAAZ;;AAsBK,KA1EM;;AA4EP;AACA2C,kBA7EO,0BA6EQjD,aA7ER,EA6EsB;AACjC,UAAI+B,IAAI,GAAG,IAAX;AACMC,aAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,WAAK5B,SAAL,GAAiB,EAAjB;AACA,UAAI6C,UAAU,GAAG;AACf,cAAM,CADS;AAEf,gBAAQ,MAFO;AAGf,eAAO,KAAK3C,eAAL,CAAqBgB,GAHb;AAIf,eAAO,KAAKhB,eAAL,CAAqBe,GAJb;AAKf,mBAAW,MALI,EAAjB;;AAOA,WAAKjB,SAAL,CAAe8C,IAAf,CAAoBD,UAApB;AACA,WAAK,IAAId,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpC,aAAa,CAACmC,MAAlC,EAA0CC,CAAC,EAA3C,EAA+C;AAC7C,aAAKG,gBAAL,CAAsBvC,aAAa,CAACoC,CAAD,CAAnC,EAAuC,IAAvC,EAA4CA,CAA5C,EAA8C,UAASE,KAAT,EAAe;AAClEP,cAAI,CAAC1B,SAAL,CAAe8C,IAAf,CAAoBb,KAApB;AACA,SAFK;AAGD;AACD;AACA,WAAKrC,SAAL,GAAiB,KAAKI,SAAtB;AACA2B,aAAO,CAACC,GAAR,CAAY,YAAZ,EAAyB,KAAKhC,SAA9B;AACD,KAjGM;;AAmGP;AACAmD,kBApGO,0BAoGQpD,aApGR,EAoGsB;AAC3BgC,aAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,WAAKgB,cAAL,CAAoBjD,aAApB;AACA;AACAqD,gBAAU,CAAC,YAAK;AACd;AACA,cAAI,CAACvB,iBAAL;AACN;AACAuB,kBAAU,CAAC,YAAK;AACfrB,iBAAO,CAACC,GAAR,CAAY,MAAI,CAAC/B,cAAjB;AACA;AACA;AACA;AACA;AACA;AACA,SAPS,EAOR,IAPQ,CAAV;AAQK,OAZS,EAYR,GAZQ,CAAV;AAaD,KArHM;;;AAwHP;AACAO,sBAzHO,gCAyHa;AACtB;AACAS,SAAG,CAACC,OAAJ,CAAY;AACXC,WAAG,EAAE,mFADM,EAC+E;AAC1FrB,YAAI,EAAE;AACLuD,cAAI,EAAE,aADD,EAFK;;AAKX7B,eAAO,EAAE,iBAACC,GAAD,EAAS;AACjBM,iBAAO,CAACC,GAAR,CAAYP,GAAG,CAAC3B,IAAhB;AACA,gBAAI,CAACQ,eAAL,GAAuBmB,GAAG,CAAC3B,IAAJ,CAAS8C,MAAT,CAAgBE,QAAvC;AACAf,iBAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+B,MAAI,CAAC1B,eAApC;AACA,SATU,EAAZ;;AAWG,KAtIM,EAnBI,E","file":"components/aco.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./aco.vue?vue&type=template&id=7cb0d6e8&scoped=true&\"\nvar renderjs\nimport script from \"./aco.vue?vue&type=script&lang=js&\"\nexport * from \"./aco.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7cb0d6e8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7cb0d6e8')) {\n      api.createRecord('7cb0d6e8', component.options)\n    } else {\n      api.reload('7cb0d6e8', component.options)\n    }\n    module.hot.accept(\"./aco.vue?vue&type=template&id=7cb0d6e8&scoped=true&\", function () {\n      api.rerender('7cb0d6e8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"E:/fustar2.0/components/aco.vue\"\nexport default component.exports","export * from \"-!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./aco.vue?vue&type=template&id=7cb0d6e8&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./aco.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\迅雷下载\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./aco.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\n  export default {\n    name: \"index\",\n    data() {\n      return {\n        selectedSight:['厦门大学','同安影视城','集美大学','方特','中山路'],\n        sightData:[],\n        distanceMatrix:[],\n        tempDistance:0,\n        tempData:[],\n        tempSight:[],\n        sightObj:{},\n        currentLocation:{},\n      }\n    },\n\t\n\tonLoad() {\n\t\t this.getCurrentLocation();\n\t},\n\t\n    methods: {\n\t\t\n      // 获取两地之间的距离\n      getDistance(origin,destination,callback){\n\t\t  var tempi = origin.no;\n\t\t  // console.log(\"tempi:\",tempi)\n\t\t  var tempj = destination.no;\n\t\t  // console.log(\"origin:\",origin)\n\t\t  // console.log(\"destination:\",destination)\n\t\tuni.request({\n\t\t    url: 'https://restapi.amap.com/v3/direction/driving', \n\t\t    data: {\n\t\t       key: 'cb003321f848fc897f55ca40cf0e6b01',\n\t\t\t\torigin:origin.lng + ',' + origin.lat,\n\t\t\t\tdestination:destination.lng + ',' + destination.lat,\n\t\t\t\tstrategy:0\n\t\t    },\n\t\t    success: (res) => {\n\t\t        // console.log(res.data); \n\t\t\t\tvar distance = res.data.route.paths[0].distance;\n\t\t\t\tthis.tempDistance = distance;\n\t\t\t\tcallback(this.tempDistance,tempi,tempj)\n\t\t    }\n\t\t});\t\n        \n      },\n\n      // 获取距离矩阵\n      getDistanceMatrix(){\n\t\tvar that = this;\n        this.distanceMatrix = [];\n        console.log(\"getDistanceMatrix\");\n        var arrayLength = this.sightData.length;\n        // this.distanceMatrix[0][0] = 0;\n        for (var i = 0; i < arrayLength; i++ ){\n          this.distanceMatrix[i] = [];\n        }\n        for (var i = 0; i < arrayLength; i++ ){\n          for (var j = 0; j < arrayLength; j++ ){\n            this.getDistance(this.sightData[i],this.sightData[j],function(value,tempi,tempj){\n\t\t\t\tthat.distanceMatrix[tempi][tempj] = value\n\t\t\t\t// console.log(\"value:\",value)\n\t\t\t});\n          }\n        }\n        // console.log(\"matrix:\" , this.distanceMatrix)\n\t\t// })\n      },\n\n      // 获取景点信息\n      getSightLocation(queryPlace,region,i,callback){\n        console.log(\"getSightLocation\");\n\t\tuni.request({\n\t\t    url: 'http://api.map.baidu.com/place/v2/search', //仅为示例，并非真实接口地址。\n\t\t    data: {\n\t\t\t\tquery:queryPlace,\n\t\t\t\tregion:region,\n\t\t\t\tak:'wRIcvin1aGUAAwXcM7tyRQwdZFyv9wnP',\n\t\t\t\toutput:'json'\n\t\t    },\n\t\t    success: (res) => {\n\t\t        // console.log(res.data);\n\t\t\t\tconst result = res.data.results[0];\n\t\t\t\t// console.log(\"res:\", result);\n\t\t\t\tthis.sightObj = {\n\t\t\t\t  'no': i+1,\n\t\t\t\t  'name': result.name,\n\t\t\t\t  'lat': result.location.lat,\n\t\t\t\t  'lng': result.location.lng,\n\t\t\t\t  'address': result.address\n\t\t\t\t};\n\t\t\t\tcallback(this.sightObj);\n\t\t    }\n\t\t});\n      },\n\n      // 构建景点数据数组\n      buildSightData(selectedSight){\n\t\tvar that = this;\n        console.log(\"buildSightData\");\n        this.tempSight = [];\n        var myLocation = {\n          'no': 0,\n          'name': '我的位置',\n          'lat': this.currentLocation.lat,\n          'lng': this.currentLocation.lng,\n          'address': '我的位置'\n        }\n        this.tempSight.push(myLocation)\n        for (let i = 0; i < selectedSight.length; i++ ){\n          this.getSightLocation(selectedSight[i],\"厦门\",i,function(value){\n\t\t\t  that.tempSight.push(value) \n\t\t  })\n        }\n        // console.log(\"buildSightData:\" , this.tempSight);\n        this.sightData = this.tempSight;\n        console.log(\"sightData:\",this.sightData); \n      },\n\n      // 路径计算\n      calculateRoute(selectedSight){\n        console.log(\"calculateRoute\");\n        this.buildSightData(selectedSight);\n        // console.log(\"date1:\",new Date());\n        setTimeout(() =>{\n          // console.log(\"date2:\",new Date());\n          this.getDistanceMatrix();\n\t\t  // console.log(C this.getDistanceMatrix())\n\t\t  setTimeout(() =>{\n\t\t\t  console.log(this.distanceMatrix)\n\t\t\t  // for (var i = 0; i < this.distanceMatrix.length; i++) {\n\t\t\t  // \tfor (var j = 0; j < this.distanceMatrix.length; j++) {\n\t\t\t  // \t\tconsole.log(\"eeee:\",this.distanceMatrix[i][j]);\n\t\t\t  // \t}    \n\t\t\t  // }\n\t\t  },5000)\n        },500);\n      },\n\n\n      // 请求当前所在位置\n      getCurrentLocation(){\n\t\t  // var that = this;\n\t\t  uni.request({\n\t\t\t  url: 'https://apis.map.qq.com/ws/location/v1/ip?key=L3LBZ-OQGE3-F3632-Y6Y3Z-2X7NS-CUBKT', //仅为示例，并非真实接口地址。\n\t\t\t  data: {\n\t\t\t\t  text: 'uni.request'\n\t\t\t  },\n\t\t\t  success: (res) => {\n\t\t\t\t  console.log(res.data);\n\t\t\t\t  this.currentLocation = res.data.result.location;\n\t\t\t\t  console.log(\"currentLocation:\",this.currentLocation);\n\t\t\t  }\n\t\t  });\n      },\n\n    },\n   \n  }\n"],"sourceRoot":""}